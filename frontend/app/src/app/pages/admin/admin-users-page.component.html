<div class="page">
  <div class="page-header">
    <div>
      <h1>Usuarios</h1>
      <p>Gestión de cuentas, roles y credenciales.</p>
    </div>
  </div>

  <section class="card">
    <div class="card-head">
      <h3>{{ editingId ? 'Editar usuario' : 'Crear usuario' }}</h3>
      <button class="ghost" *ngIf="editingId" (click)="resetForm()">Cancelar</button>
    </div>
    <div class="form-grid">
      <input type="text" placeholder="personaId" [(ngModel)]="personaId" />
      <input type="text" placeholder="username" [(ngModel)]="username" />
      <input type="password" placeholder="password" [(ngModel)]="password" />
      <button class="primary" (click)="save()">{{ editingId ? 'Actualizar' : 'Crear' }}</button>
    </div>
    <p class="error" *ngIf="error">{{ error }}</p>
  </section>

  <section class="card">
    <div class="table-actions">
      <span class="muted">{{ users.length }} usuarios</span>
    </div>
    <table>
      <thead>
        <tr><th>ID</th><th>Usuario</th><th>Persona</th><th>Acción</th></tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of users">
          <td>{{ item.id }}</td>
          <td>{{ item.username }}</td>
          <td>{{ item.personaId }}</td>
          <td class="actions">
            <button class="ghost" (click)="edit(item)">Editar</button>
            <button class="ghost danger" (click)="remove(item.id)">Eliminar</button>
          </td>
        </tr>
      </tbody>
    </table>
  </section>
</div>
